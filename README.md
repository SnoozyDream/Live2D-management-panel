# Live2D Asset Management Panel (Portfolio)

Live2Dモデルアセットとユーザー権限を管理するためのWebベース管理画面のプロトタイプです。

## プロジェクト概要
所属ライバーのLive2Dモデル（.moc3）やテクスチャ、モーションデータを一括管理し、ブラウザ上でプレビュー・更新を行うためのシステムを想定しています。 
現在は、**Live2D Cubism SDK for Web** を統合したプレビュー基盤と、マルチページ構成が完成した状態です。

## アップデート内容 (2026/01/25)
描画エンジンのリソース管理最適化
WebGL/PIXI.jsのリソース解放処理（app.destroy）を厳格化。モデル切り替え時のメモリリークやキャンバスの多重定義（SyntaxError）を完全に解消。
排他制御（isLoading フラグ）の導入により、非同期読み込み中の多重実行によるクラッシュを防止。
タブレット・モバイル向けレスポンシブUIの高度化
メディアクエリを活用し、iPad等のタブレットサイズにおいて「プレビュー」と「操作パネル」の2カラム（横並び）レイアウトを実現。
position: sticky を採用し、長い衣装リストをスクロールしてもプレビューモデルが常に画面内に固定されるユーザビリティを確保。

## 実装済み機能
## 🛠 実装済み機能
### 🛠️ アップデート内容（2026/01/29）
- **衣装管理システムの刷新（UUID導入）**
  - 登録時の重複チェックロジックを実装し、データの堅牢性を向上。
  - 削除・着せ替え処理を「名前ベース」から「IDベース」へ完全移行。これにより、同名の衣装が存在しても正確な操作が可能になりました。
  - UI表示（名前）と内部処理（ID）を分離し、ユーザーフレンドリーな操作感と安全なデータ管理を両立。
- **Live2D Cubism SDK 統合 (v5.0対応)**
  - `Cubism Core` および `PixiJS` を利用した .moc3 モデルのレンダリング基盤を構築。
  - CDN経由でのSDKロードと、非同期処理（async/await）によるモデル読み込み制御を実装。
- **マルチページUI構築**
  - サイドメニューによる画面遷移（ダッシュボード / 衣装権限管理 / アセット登録）。
  - 外部CSS（style.css）による共通デザインの統一管理。
- **アセットプレビュー機能**: FileReader API を活用し、選択した画像を即座にブラウザ上で確認可能。
- **衣装権限管理プロトタイプ**: ライバーごとの所有衣装や承認ステータスを一覧表示するテーブルレイアウト。
- **レスポンシブ設計**: PCおよびモバイルブラウザからの閲覧に最適化。

### アーキテクチャ構成
役割を明確に分離した 3-Layer アーキテクチャを採用しています。
- **storage.js (Data Layer)**: 
    - LocalStorageを使用したデータのCRUD操作（生成・取得・更新・削除）を担当。
    - ライバーとモデルパスの対応表（名簿）を一括管理。
- **live2d-viewer.js (Presentation Layer)**: 
    - PIXI.jsおよびLive2D Cubism SDKを用いた描画専門のエンジン。
    - 外部からの引数（Canvas ID, Model URL）に応じて動的に描画。
- **assets.js (Controller Layer)**: 
    - ユーザー操作（フォーム送信、衣装選択）を各モジュールへ仲介する司令塔。


### 追加機能
- **衣装選択（着替え）機能**: 一覧から衣装名をクリックすることで、選択状態を保持しLive2D表示へ反映。
- **ライバー別フィルタリング**: URLパラメータから取得したライバー名に基づき、表示データとモデルを自動切り替え。
## 今後の実装予定
- [ ] **Firebase 連携によるアセット管理の動態化**
  - Live2Dモデルの設定情報や衣装権限データをクラウド上で一元管理し、ブラウザからリアルタイムで追加・編集・保存ができるCRUD（クラッド）機能の実装。
---

## 📂 ディレクトリ構造
```text
project/
├── index.html           # ダッシュボード（ポータル）
├── permissions.html     # ライバー一覧・権限表示
├── assets.html          # 衣装設定・モデルプレビュー
├── style.css            # 共通スタイル・レスポンシブ定義
├── js/                  # JavaScript資産
│   ├── storage.js       # データ永続化
│   ├── live2d-viewer.js # 描画エンジン
│   ├── assets.js        # アセット管理ロジック
│   └── permissions.js   # 権限管理ロジック
└── models/              # Live2Dモデルデータ（.moc3 / .json）
